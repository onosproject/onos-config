# SPDX-FileCopyrightText: 2019-present Open Networking Foundation <info@opennetworking.org>
#
# SPDX-License-Identifier: Apache-2.0

run:
  # Autogenerated files take too much time and memory to load,
  # even if we skip them with -skip-dirs or -skip-dirs;
  # or mark them as generated; or use nolint annotations.
  # So we define this tag and use it in the autogenerated files.
  build-tags:
    - codeanalysis

linters:
  enable:
    - gofmt
    # - revive
    - misspell
    - typecheck
    - errcheck
    - dogsled
    - unconvert
    - nakedret
    - exportloopref

issues:
  exclude-use-default: false
  exclude:
    - Error return value of `.*Close` is not checked
    - Error return value of `.*Flush` is not checked
    - Error return value of `.*Write` is not checked
    - Error return value of `.*Stop` is not checked
    - "package-comments: should have a package comment"
  exclude-rules:
    - path: pkg/northbound/gnmi/set.go
      linters:
        - typecheck
    - path: pkg
      linters:
        - staticcheck
      text: "SA1019:"
    - path: test
      linters:
          - staticcheck
      text: "SA1019:"
    - path: pkg/utils
      text: "copylocks"
    - path: pkg/store/device/store.go
      linters:
        - scopelint
    - path: pkg/manager
      text: "is unused"
    - path: pkg
      text: "is unused"
    - path: pkg/northbound/gnmi/subscribe_test.go
      text: "is unused"
